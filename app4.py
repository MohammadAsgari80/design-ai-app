import streamlit as st
import pandas as pd
from sklearn.tree import DecisionTreeClassifier
from sklearn.preprocessing import LabelEncoder

# ุชูุธูุงุช ุตูุญู
st.set_page_config(page_title="ูพุดููุงุฏ ุทุฑุงุญ ูพุณุช ุงูุณุชุงฺฏุฑุงู", layout="centered")
st.title("๐จ ุงุจุฒุงุฑ ููุดููุฏ ูพุดููุงุฏ ุทุฑุงุญ ูพุณุช ุงูุณุชุงฺฏุฑุงู")

# ุฏุงุฏู ุขููุฒุด ุณุงุฏู
data = pd.DataFrame([
    ["ูุฑูุด", "ุขููุฒุด", "ุฌูุงู", "ูุชูุณุท", "ฺฏุฑู", "ุดุจฺฉูโุง", "ุฏุงุฑู", "ุฒุงุฏ", "ูุฑฺฉุฒฺู", "ูุฑูุฒ"],
    ["ุงุทูุงุนโุฑุณุงู", "ูุดู", "ููุฌูุงู", "ุจุงูุง", "ุณุฑุฏ", "ุณุชูู", "ูุซูุซ", "ฺฉู", "ฺูพโฺู", "ุขุจ"],
    ["ูุนุฑู ูุญุตูู", "ุชฺฉููููฺ", "ุฌูุงู", "ูุชูุณุท", "ุฎูุซ", "ูุฑุจุน", "ูุณุชุทู", "ูุชูุณุท", "ุฑุงุณุชโฺู", "ุฎุงฺฉุณุชุฑ"],
    ["ุฌุฐุจ ูุงูููุฑ", "ุบุฐุง", "ุนููู", "ูพุงู", "ฺฏุฑู", "ุฏุงุฑูโุง", "ุฏุงุฑู", "ุฒุงุฏ", "ูุฑฺฉุฒฺู", "ูุงุฑูุฌ"],
    ["ุงุทูุงุนโุฑุณุงู", "ูุงู", "ุจุฒุฑฺฏุณุงู", "ูุชูุณุท", "ุณุฑุฏ", "ุณุชูู", "ูุณุชุทู", "ฺฉู", "ุฑุงุณุชโฺู", "ุขุจ"]
], columns=["ูุฏู ูพุณุช", "ุดุบู", "ูุฎุงุทุจ", "ุจูุฏุฌู", "ุฑูฺฏ ุจุฑูุฏ", 
            "layout", "shape", "radius", "alignment", "color"])

# ุขูุงุฏูโุณุงุฒ ุฏุงุฏู
le = LabelEncoder()
X = data[["ูุฏู ูพุณุช", "ุดุบู", "ูุฎุงุทุจ", "ุจูุฏุฌู", "ุฑูฺฏ ุจุฑูุฏ"]].apply(le.fit_transform)
y = data[["layout", "shape", "radius", "alignment", "color"]].apply(le.fit_transform)

# ุขููุฒุด ูุฏู
model = DecisionTreeClassifier()
model.fit(X, y)

# ูุฑู ูุฑูุฏ ฺฉุงุฑุจุฑ
with st.form("design_form"):
    col1, col2 = st.columns(2)
    goal = col1.selectbox("๐ฏ ูุฏู ูพุณุช", ["ูุฑูุด", "ุงุทูุงุนโุฑุณุงู", "ูุนุฑู ูุญุตูู", "ุฌุฐุจ ูุงูููุฑ"])
    job = col2.selectbox("๐ผ ุญูุฒู ฺฉุงุฑ", ["ุขููุฒุด", "ูุดู", "ุชฺฉููููฺ", "ุบุฐุง", "ูุงู"])
    audience = col1.selectbox("๐ฅ ููุน ูุฎุงุทุจ", ["ููุฌูุงู", "ุฌูุงู", "ุจุฒุฑฺฏุณุงู", "ุนููู"])
    budget = col2.selectbox("๐ฐ ุจูุฏุฌู ุทุฑุงุญ", ["ูพุงู", "ูุชูุณุท", "ุจุงูุง"])
    brand_color = col1.selectbox("๐จ ุฑูฺฏ ุจุฑูุฏ (ุฏุฑ ุตูุฑุช ูุฌูุฏ)", ["ฺฏุฑู", "ุณุฑุฏ", "ุฎูุซ", "ููู ูุณุช"])

    submitted = st.form_submit_button("ุฏุฑุงูุช ูพุดููุงุฏ")

if submitted:
    input_df = pd.DataFrame([[goal, job, audience, budget, brand_color]], 
                             columns=["ูุฏู ูพุณุช", "ุดุบู", "ูุฎุงุทุจ", "ุจูุฏุฌู", "ุฑูฺฏ ุจุฑูุฏ"])
    input_encoded = input_df.apply(le.fit_transform)
    prediction = model.predict(input_encoded)[0]

    # ุฏฺฉุดูุฑ ุชุฑุฌูู ููุงุฏุฑ ุนุฏุฏ ุจู ุชูุถุญโูุง ุงูุณุงู
    layout_dict = {
        0: "ุดุจฺฉูโุง โ ููุงุณุจ ููุงุด ฺูุฏ ุชุตูุฑ ุง ูุญุตูู ฺฉูุงุฑ ูู",
        1: "ุณุชูู โ ุชุฃฺฉุฏ ุจุฑ ูุชู ุง ุฑูุงุช",
        2: "ูุฑุจุน โ ฺุฏูุงู ฺฉูุงุณฺฉ ู ูุชูุงุฑู",
        3: "ุฏุงุฑูโุง โ ุทุฑุงุญ ูพูุง ู ุฌุฐุงุจ ุจุฑุง ฺุดู"
    }
    shape_dict = {
        0: "ุฏุงุฑู โ ุงููุง ูุฑู ู ุตููุช",
        1: "ูุซูุซ โ ุงูุฑฺ ู ุญุฑฺฉุช",
        2: "ูุณุชุทู โ ุณุงุฎุชุงุฑ ุฑุณู ู ุฌุฏ"
    }
    radius_dict = {
        0: "ฺฉู โ ฺฏูุดูโูุง ุชุฒ ู ุฑุณู",
        1: "ูุชูุณุท โ ุชุนุงุฏู ูุงู ุฑุณู ู ุฏูุณุชุงูู",
        2: "ุฒุงุฏ โ ุทุฑุงุญ ูุฑู ู ุฏูุณุชุงูู"
    }
    align_dict = {
        0: "ฺูพโฺู โ ููุงุณุจ ุฒุจุงูโูุง ฺูพโุจูโุฑุงุณุช ู ูุฑู ุฑุณู",
        1: "ุฑุงุณุชโฺู โ ุณุงุฎุชุงุฑ ุณูุชโุชุฑ ู ููุธู",
        2: "ูุฑฺฉุฒฺู โ ููุงุณุจ ุทุฑุงุญโูุง ุงุญุณุงุณ ู ุฌูุจ ุชูุฌู"
    }
    color_dict = {
        0: "ูุฑูุฒ โ ุงูุฑฺุ ูุฑูุด ููุฑุ ูุฌุงู",
        1: "ุขุจ โ ุงุนุชูุงุฏุ ุขุฑุงูุดุ ุญุฑููโุง",
        2: "ุฎุงฺฉุณุชุฑ โ ุฎูุซุ ูุฏุฑูุ ููุงูุฑ",
        3: "ูุงุฑูุฌ โ ุฏูุณุชุงููุ ุบุฐุงุ ูพูุง",
        4: "ุขุจ โ ุณุฑุฏุ ูุงูุ ุดูุงูุช"
    }

    layout, shape, radius, alignment, color = prediction

    st.markdown("## โจ ูพุดููุงุฏ ุทุฑุงุญ ููุดููุฏ")
    st.markdown(f"๐ฒ **ููุน ูุงูุจ:** {layout_dict.get(layout, 'ูุงูุดุฎุต')}")
    st.markdown(f"๐ท **ููุน ุดฺฉูโูุง:** {shape_dict.get(shape, 'ูุงูุดุฎุต')}")
    st.markdown(f"๐ฏ **ูุฒุงู ุงูุญูุง (radius):** {radius_dict.get(radius, 'ูุงูุดุฎุต')}")
    st.markdown(f"๐ **ฺูุด ุนูุงุตุฑ:** {align_dict.get(alignment, 'ูุงูุดุฎุต')}")
    st.markdown(f"๐จ **ุฑูฺฏ ูพุดููุงุฏ:** {color_dict.get(color, 'ูุงูุดุฎุต')}")
